<!-- This file needs to be hosted on an external server.  -->

<!DOCTYPE html>

<html>

<link rel='stylesheet' type='text/css' href='css/style.css'>
<link rel='stylesheet' type='text/css' href='css/rangeSlider.css'>
<link rel='stylesheet' type='text/css' href='css/modal.css'>

<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js'></script>
<script src='js/turkey-lite/js/turkey-lite.js'></script>
<script language='Javascript'>
// This method Gets URL Parameters (GUP)
function gup(name) {
  var regexS = '[\\?&]' + name + '=([^&#]*)';
  var regex = new RegExp(regexS);
  var tmpURL = window.location.href;
  var results = regex.exec(tmpURL);
  if (results == null)
    return '';
  else
    return results[1];
}

// This method decodes the query parameters that were URL-encoded
function decode(strToDecode) {
  var encoded = strToDecode;
  return unescape(encoded.replace(/\+/g,  ' '));
}
</script>

<body>
<form id='mturk_form' method='POST' action='https://www.mturk.com/mturk/externalSubmit'>

<input type='hidden' id='assignmentId' name='assignmentId' value=''>

<div id='instructions'>

<p><b class='important'>Instructions:</b> A smart computer is trying to decide if an image is allowable on Facebook or not. Your job is to help the computer by telling it which category the image best falls under:</p>
<ul>
  <li><b>Pornography:</b> Does the image display pornography, nudity, or overly sexual themes?</li>
  <li><b>Violence:</b> Does this image display execessive violence, torture, gore, blood, or injury towards a person or animal?</li>
  <li><b>Safe for work (SFW):</b> Is this an image you would be comfortable showing to a 10 year old? Is this an image you can show to your boss and coworkers without getting in trouble?</li>
</ul>
<p>Categorize the image to the best of your judgement, determine if it is realistic, and indicate how confident you are in your answer using the slider bar. Press the <b>&lt; Prev</b> and <b>Next ></b> buttons to navigate between images. If the image does not load, click the red button. However, <span class='important'>if you skip too many images, your work will be rejected; if too many images do not load, please DO NOT complete the task</span>. Once you have reached the last image, press <b>Next ></b> to optionally provide feedback and submit your work.
</p>

</div>

<div>

<div id='task' class='section'>

<table id='grid'>
  <tr>
  <td id='left'>
    <img src='' alt=''>
  </td>
  <td id='right'>
    <div>
      <b>1. What category best describes this image?</b><br><br>
      <div id='categories'>
	<!--
        <input type='radio' name='category' value='pornography'> Pornography<br>
        <input type='radio' name='category' value='violence'> Violence<br>
        <input type='radio' name='category' value='sfw'> Safe for work (SFW)<br>
	-->
      </div>
    </div><br>
    <div>
      <b>2. Does this image look like there is a real person or animal in it?</b><br><br>
      <div id='types'>
	<!--
        <input type='radio' name='type' value='realistic'> Yes<br>
        <input type='radio' name='type' value='synthetic'> No<br>
	-->
      </div>
    </div><br>
    <div>
      <b>3. How confident are you in your answer?</b>
      <table>
        <tr><td><input id='confidenceRange' type='range' name='confidence' min='1' max='5'></td></tr>
        <tr><td><p id='confidenceLabel'></p></td></tr>
      </table>
    </div><br>
    <div>
      <table id='navButtons'>
        <tr>
          <td><button type='button' id='prev' class='nav'>&lt; Prev</button></td>
          <td><button type='button' id='issue' class='nav'>Image did<br>not load</button></td>
          <td><button type='button' id='next' class='nav'>Next ></button></td>
          <td><span id='counter'></span>&nbsp;/ <span id='total'></span></td>
        </tr>
      </table>
    </div>
  </td>
  </tr>
</table>
</div>

<div id='feedback' class='modal'>

<div class='modal-content'>
  <h3>Feedback</h3>
  <table>
    <tr><td>Thank you for taking the time to complete this task. If you would like to provide us feedback regarding this HIT, please do so here. To submit your answers, please click the <b>Submit</b> button. To return to the task, press the <b>Go back</b> button.</td></tr>

    <tr><td><textarea name='feedback'></textarea></td></tr>
    <tr>
      <td><input id='submitButton' type='submit' name='Submit' value='Submit'>
      <button id='submit-cancel' type='button'>Go back</button></td>
    </tr>
  </table>
</div>

</div>

</div>

</form>

<script src='js/rangeSlider.js'></script>
<script src='js/shuffleInputs.js'></script>
<script src='js/main.js'></script>
<script src='js/nav.js'></script>

<script language='Javascript'>
$('#assignmentId').val(gup('assignmentId'));
// Check if the worker is PREVIEWING the HIT or if they've ACCEPTED the HIT
if (gup('assignmentId') == 'ASSIGNMENT_ID_NOT_AVAILABLE') {
  // If we're previewing, disable the button and give it a helpful message
  $('#submitButton').attr('disabled', true)
  $('*').click(function(evt) {
    evt.stopPropagation();
    alert('Please accept the HIT before working on it.');
  });
} else {
  if (document.referrer && (document.referrer.indexOf('workersandbox') != -1))
    $('#mturk_form').attr('action', 'https://workersandbox.mturk.com/mturk/externalSubmit');
}
</script>

</body>
</html>
